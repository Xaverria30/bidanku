# ğŸ“Š INTEGRATION ARCHITECTURE DIAGRAM

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    APLIKASI BIDAN PINTAR                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚      FRONTEND (React)    â”‚      â”‚     BACKEND (Express)    â”‚ â”‚
â”‚  â”‚   localhost:3000         â”‚      â”‚    localhost:5000        â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚                          â”‚      â”‚                          â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚      â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚ â”‚ Masuk Component    â”‚  â”‚ HTTP â”‚ â”‚ auth.routes       â”‚   â”‚ â”‚
â”‚  â”‚ â”‚ (Login)            â”‚â”€â”€â”€â”€â”€â”€â–º  â”‚ â”‚ - POST /register  â”‚   â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ REST â”‚ â”‚ - POST /login     â”‚   â”‚ â”‚
â”‚  â”‚          â”‚              â”‚      â”‚ â”‚ - POST /verify-otpâ”‚   â”‚ â”‚
â”‚  â”‚          â”‚              â”‚      â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚      â”‚          â”‚               â”‚ â”‚
â”‚  â”‚ â”‚ BuatAkun Component â”‚  â”‚      â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚ â”‚ (Register)         â”‚  â”‚      â”‚ â”‚ auth.controller    â”‚   â”‚ â”‚
â”‚  â”‚ â”‚                    â”‚  â”‚      â”‚ â”‚ - register()       â”‚   â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚      â”‚ â”‚ - login()          â”‚   â”‚ â”‚
â”‚  â”‚          â”‚              â”‚      â”‚ â”‚ - verifyOTP()      â”‚   â”‚ â”‚
â”‚  â”‚          â”‚              â”‚      â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚      â”‚          â”‚               â”‚ â”‚
â”‚  â”‚ â”‚ VerifikasiOTP      â”‚  â”‚      â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚ â”‚ (OTP Verification) â”‚  â”‚      â”‚ â”‚ auth.service       â”‚   â”‚ â”‚
â”‚  â”‚ â”‚                    â”‚  â”‚      â”‚ â”‚ - registerUser()   â”‚   â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚      â”‚ â”‚ - loginUser()      â”‚   â”‚ â”‚
â”‚  â”‚          â”‚              â”‚      â”‚ â”‚ - getUser()        â”‚   â”‚ â”‚
â”‚  â”‚          â”‚              â”‚      â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚      â”‚          â”‚               â”‚ â”‚
â”‚  â”‚ â”‚ LupaPassword       â”‚  â”‚      â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚ â”‚ (Forgot Password)  â”‚  â”‚      â”‚ â”‚ otp.service (NEW)  â”‚   â”‚ â”‚
â”‚  â”‚ â”‚                    â”‚  â”‚      â”‚ â”‚ - sendOTP()        â”‚   â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚      â”‚ â”‚ - verifyOTP()      â”‚   â”‚ â”‚
â”‚  â”‚          â”‚              â”‚      â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚      â”‚          â”‚               â”‚ â”‚
â”‚  â”‚ â”‚ ResetPassword (NEW)â”‚  â”‚      â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚ â”‚                    â”‚  â”‚      â”‚ â”‚ mailer.js (NEW)    â”‚   â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚      â”‚ â”‚ - sendEmail()      â”‚   â”‚ â”‚
â”‚  â”‚                          â”‚      â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                 â”‚                             â”‚                 â”‚
â”‚                 â”‚         authService.js      â”‚                 â”‚
â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                                   â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚         â”‚      External Services          â”‚                      â”‚
â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                      â”‚
â”‚         â”‚ âœ‰ï¸  Gmail SMTP (OTP Email)      â”‚                      â”‚
â”‚         â”‚ ğŸ—„ï¸  MySQL Database             â”‚                      â”‚
â”‚         â”‚ ğŸ”  JWT Token Service          â”‚                      â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Component Flow Diagram

```
START
  â”‚
  â”œâ”€â–º Page: Masuk (Login)
  â”‚    â”‚
  â”‚    â”œâ”€ Input: username/email + password
  â”‚    â”‚
  â”‚    â”œâ”€ authService.login()
  â”‚    â”‚    â”‚
  â”‚    â”‚    â””â”€â–º API: POST /auth/login
  â”‚    â”‚         â”‚
  â”‚    â”‚         â”œâ”€ Backend: Validate credentials
  â”‚    â”‚         â”œâ”€ Backend: Send OTP to email
  â”‚    â”‚         â””â”€ Response: {email, message}
  â”‚    â”‚
  â”‚    â”œâ”€ localStorage: loginEmail = email
  â”‚    â”‚
  â”‚    â”œâ”€ Navigate: VerifikasiOTP
  â”‚    â”‚    â”‚
  â”‚    â”‚    â”œâ”€ User: Check email for OTP
  â”‚    â”‚    â”œâ”€ User: Input 6-digit OTP
  â”‚    â”‚    â”‚
  â”‚    â”‚    â”œâ”€ authService.verifyOTP()
  â”‚    â”‚    â”‚    â”‚
  â”‚    â”‚    â”‚    â””â”€â–º API: POST /auth/verify-otp
  â”‚    â”‚    â”‚         â”‚
  â”‚    â”‚    â”‚         â”œâ”€ Backend: Validate OTP
  â”‚    â”‚    â”‚         â”œâ”€ Backend: Generate JWT
  â”‚    â”‚    â”‚         â””â”€ Response: {token, user}
  â”‚    â”‚    â”‚
  â”‚    â”‚    â”œâ”€ localStorage: token = JWT
  â”‚    â”‚    â”œâ”€ localStorage: user = userData
  â”‚    â”‚    â”‚
  â”‚    â”‚    â””â”€ Navigate: Dashboard
  â”‚    â”‚
  â”‚    â””â”€â–º LOGGED IN âœ…
  â”‚
  â”œâ”€â–º Page: BuatAkun (Register)
  â”‚    â”‚
  â”‚    â”œâ”€ Input: nama, username, email, password
  â”‚    â”‚
  â”‚    â”œâ”€ authService.register()
  â”‚    â”‚    â”‚
  â”‚    â”‚    â””â”€â–º API: POST /auth/register
  â”‚    â”‚         â”‚
  â”‚    â”‚         â”œâ”€ Backend: Validate input
  â”‚    â”‚         â”œâ”€ Backend: Hash password
  â”‚    â”‚         â”œâ”€ Backend: Save to DB
  â”‚    â”‚         â”œâ”€ Backend: Send OTP
  â”‚    â”‚         â””â”€ Response: {message, data}
  â”‚    â”‚
  â”‚    â”œâ”€ localStorage: registerEmail = email
  â”‚    â”‚
  â”‚    â”œâ”€ Navigate: VerifikasiOTP
  â”‚    â”‚    â”‚
  â”‚    â”‚    â””â”€ [Same as Login verification flow]
  â”‚    â”‚
  â”‚    â””â”€â–º LOGGED IN âœ…
  â”‚
  â””â”€â–º Page: LupaPassword (Forgot Password - Step 1)
       â”‚
       â”œâ”€ Input: email
       â”‚
       â”œâ”€ authService.requestPasswordReset()
       â”‚    â”‚
       â”‚    â””â”€â–º API: POST /auth/forgot-password/request
       â”‚         â”‚
       â”‚         â”œâ”€ Backend: Validate email
       â”‚         â”œâ”€ Backend: Generate OTP
       â”‚         â”œâ”€ Backend: Send OTP to email
       â”‚         â””â”€ Response: {message}
       â”‚
       â”œâ”€ localStorage: resetEmail = email
       â”‚
       â”œâ”€ Navigate: VerifikasiOTP
       â”‚    â”‚
       â”‚    â”œâ”€ User: Check email for OTP
       â”‚    â”œâ”€ User: Input 6-digit OTP
       â”‚    â”‚
       â”‚    â”œâ”€ authService.verifyResetCode()
       â”‚    â”‚    â”‚
       â”‚    â”‚    â””â”€â–º API: POST /auth/forgot-password/verify-code
       â”‚    â”‚         â”‚
       â”‚    â”‚         â”œâ”€ Backend: Validate OTP
       â”‚    â”‚         â”œâ”€ Backend: Generate reset token
       â”‚    â”‚         â””â”€ Response: {reset_token}
       â”‚    â”‚
       â”‚    â”œâ”€ localStorage: resetToken = reset_token
       â”‚    â”‚
       â”‚    â””â”€ Navigate: ResetPassword
       â”‚
       â”œâ”€â–º Page: ResetPassword (Step 3)
       â”‚    â”‚
       â”‚    â”œâ”€ Input: new_password, confirm_password
       â”‚    â”‚
       â”‚    â”œâ”€ authService.resetPassword()
       â”‚    â”‚    â”‚
       â”‚    â”‚    â””â”€â–º API: POST /auth/forgot-password/reset
       â”‚    â”‚         â”‚
       â”‚    â”‚         â”œâ”€ Backend: Validate reset token
       â”‚    â”‚         â”œâ”€ Backend: Update password
       â”‚    â”‚         â””â”€ Response: {message}
       â”‚    â”‚
       â”‚    â”œâ”€ localStorage: Clear resetToken
       â”‚    â”‚
       â”‚    â””â”€ Navigate: Masuk (Login)
       â”‚         â”‚
       â”‚         â””â”€ User: Login with new password
       â”‚
       â””â”€â–º LOGGED IN âœ…
```

---

## Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    REQUEST-RESPONSE FLOW                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚ Frontend (React)              Backend (Express)     Database     â”‚
â”‚     â”‚                              â”‚                   â”‚         â”‚
â”‚     â”‚ POST /auth/register          â”‚                   â”‚         â”‚
â”‚     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                   â”‚         â”‚
â”‚     â”‚ {nama, username, email,pass} â”‚                   â”‚         â”‚
â”‚     â”‚                              â”‚ Validate Input    â”‚         â”‚
â”‚     â”‚                              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚         â”‚
â”‚     â”‚                              â”‚ Hash Password     â”‚         â”‚
â”‚     â”‚                              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚         â”‚
â”‚     â”‚                              â”‚ INSERT user       â”‚         â”‚
â”‚     â”‚                              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚         â”‚
â”‚     â”‚                              â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚     â”‚                              â”‚ user_id returned  â”‚         â”‚
â”‚     â”‚                              â”‚ Generate OTP      â”‚         â”‚
â”‚     â”‚                              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚         â”‚
â”‚     â”‚                              â”‚ INSERT otp_codes  â”‚         â”‚
â”‚     â”‚                              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚         â”‚
â”‚     â”‚                              â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚     â”‚                              â”‚ Send Email (OTP)  â”‚         â”‚
â”‚     â”‚                              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚         â”‚
â”‚     â”‚ {message, user_data} (201)  â”‚                   â”‚         â”‚
â”‚     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚         â”‚
â”‚     â”‚ Save to localStorage          â”‚                   â”‚         â”‚
â”‚     â”‚                              â”‚                   â”‚         â”‚
â”‚     â”‚ POST /auth/verify-otp        â”‚                   â”‚         â”‚
â”‚     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                   â”‚         â”‚
â”‚     â”‚ {usernameOrEmail, otp_code}  â”‚                   â”‚         â”‚
â”‚     â”‚                              â”‚ Query OTP         â”‚         â”‚
â”‚     â”‚                              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚         â”‚
â”‚     â”‚                              â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚     â”‚                              â”‚ Validate OTP      â”‚         â”‚
â”‚     â”‚                              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚         â”‚
â”‚     â”‚                              â”‚ Update verified   â”‚         â”‚
â”‚     â”‚                              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚         â”‚
â”‚     â”‚                              â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚     â”‚                              â”‚ Generate JWT      â”‚         â”‚
â”‚     â”‚                              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚         â”‚
â”‚     â”‚ {token, user_data} (200)    â”‚                   â”‚         â”‚
â”‚     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚         â”‚
â”‚     â”‚ Save token to localStorage    â”‚                   â”‚         â”‚
â”‚     â”‚ Navigate to Dashboard         â”‚                   â”‚         â”‚
â”‚     â”‚                              â”‚                   â”‚         â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Database Schema Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      users          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id_user (PK)    â—„â”€â” â”‚
â”‚ nama_lengkap      â”‚ â”‚
â”‚ username (UK)     â”‚ â”‚
â”‚ email (UK)        â”‚ â”‚
â”‚ password (hash)   â”‚ â”‚
â”‚ verified_at       â”‚ â”‚
â”‚ is_active         â”‚ â”‚
â”‚ created_at        â”‚ â”‚
â”‚ updated_at        â”‚ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–²
         â”‚ (Foreign Key)
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   otp_codes         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)             â”‚
â”‚ id_user (FK) â”€â”€â”€â”€â”€â”€â–º
â”‚ email               â”‚
â”‚ otp_code            â”‚
â”‚ tipe_otp            â”‚
â”‚ is_used             â”‚
â”‚ expires_at          â”‚
â”‚ created_at          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Relationships:
- users (1) â”€â”€â”€ (M) otp_codes
  One user can have multiple OTP codes
```

---

## localStorage State Management

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Browser localStorage             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                          â”‚
â”‚ After Successful Login:                  â”‚
â”‚ â”œâ”€ token: "eyJhbGciOiJIUzI1NiIs..."    â”‚
â”‚ â”œâ”€ user: {                               â”‚
â”‚ â”‚   id_user: "uuid-xxx",                â”‚
â”‚ â”‚   nama_lengkap: "John Doe",           â”‚
â”‚ â”‚   username: "johndoe",                â”‚
â”‚ â”‚   email: "john@example.com"           â”‚
â”‚ â”‚ }                                      â”‚
â”‚                                          â”‚
â”‚ During Auth Flow (Temporary):            â”‚
â”‚ â”œâ”€ loginEmail: "email@example.com"      â”‚
â”‚ â”œâ”€ registerEmail: "email@example.com"   â”‚
â”‚ â”œâ”€ resetEmail: "email@example.com"      â”‚
â”‚ â””â”€ resetToken: "reset-token-xxx"        â”‚
â”‚                                          â”‚
â”‚ After Logout:                            â”‚
â”‚ â””â”€ (All keys cleared)                   â”‚
â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Error Handling Flow

```
User Action
    â”‚
    â”œâ”€ Validation Error?
    â”‚  â”œâ”€ YES â”€â”€â–º Show Error Message â—„â”€ Input tidak valid
    â”‚  â””â”€ NO
    â”‚
    â”œâ”€ API Call
    â”‚  â”œâ”€ Network Error?
    â”‚  â”‚  â”œâ”€ YES â”€â”€â–º Show: "Tidak bisa menghubungi server"
    â”‚  â”‚  â””â”€ NO
    â”‚  â”‚
    â”‚  â””â”€ Response Error?
    â”‚     â”œâ”€ 400 (Bad Request)
    â”‚     â”‚  â””â”€ Show: error.message dari backend
    â”‚     â”‚
    â”‚     â”œâ”€ 401 (Unauthorized)
    â”‚     â”‚  â””â”€ Show: "Username/Email atau password salah"
    â”‚     â”‚
    â”‚     â”œâ”€ 409 (Conflict)
    â”‚     â”‚  â””â”€ Show: "Email/Username sudah terdaftar"
    â”‚     â”‚
    â”‚     â”œâ”€ 500 (Server Error)
    â”‚     â”‚  â””â”€ Show: "Terjadi kesalahan pada server"
    â”‚     â”‚
    â”‚     â””â”€ 200/201 (Success)
    â”‚        â””â”€ Proceed to next step
    â”‚
    â””â”€ Success
       â””â”€ Navigate or Save Data
```

---

## Security Flow

```
User Password
    â”‚
    â”œâ”€ Frontend: Validate (min 8 chars)
    â”‚
    â”œâ”€ Send to Backend via HTTPS
    â”‚
    â”œâ”€ Backend: Validate again
    â”‚
    â”œâ”€ Bcrypt: Hash password (10 rounds)
    â”‚
    â””â”€ Database: Store hashed password only
       â”‚
       â””â”€ Never store plain password âŒ
           Never send password in response âŒ
           Always use HTTPS in production âœ…
           Use JWT for session management âœ…
```

---

## Component Dependency Graph

```
App.js (Main)
â”œâ”€ Masuk (Login)
â”‚  â””â”€ authService.login()
â”‚     â””â”€ API: /auth/login
â”‚
â”œâ”€ BuatAkun (Register)
â”‚  â””â”€ authService.register()
â”‚     â””â”€ API: /auth/register
â”‚
â”œâ”€ VerifikasiOTP (OTP Verification)
â”‚  â”œâ”€ authService.verifyOTP()
â”‚  â”‚  â””â”€ API: /auth/verify-otp
â”‚  â”‚
â”‚  â””â”€ authService.verifyResetCode()
â”‚     â””â”€ API: /auth/forgot-password/verify-code
â”‚
â”œâ”€ LupaPassword (Forgot Password - Step 1)
â”‚  â””â”€ authService.requestPasswordReset()
â”‚     â””â”€ API: /auth/forgot-password/request
â”‚
â””â”€ ResetPassword (Reset Password - Step 3)
   â””â”€ authService.resetPassword()
      â””â”€ API: /auth/forgot-password/reset
```

---

## Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PRODUCTION ENVIRONMENT                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   Frontend Hosting   â”‚           â”‚  Backend Hosting     â”‚    â”‚
â”‚  â”‚  (Vercel/Netlify)   â”‚           â”‚  (AWS/GCP/Azure)    â”‚    â”‚
â”‚  â”‚  https://...com      â”‚â—„â”€HTTPSâ”€â–º â”‚  https://api...com   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚            â”‚                                   â”‚                â”‚
â”‚            â”‚                                   â”‚                â”‚
â”‚            â”‚                                   â”œâ”€â–º MySQL DB    â”‚
â”‚            â”‚                                   â”œâ”€â–º Redis Cache â”‚
â”‚            â”‚                                   â””â”€â–º Email Service
â”‚            â”‚                                                   â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                                   â”‚
â”‚  SSL Certificate (Let's Encrypt)                                â”‚
â”‚  Domain: yourdomain.com                                        â”‚
â”‚  CORS: Configured for specific origins                        â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**This architecture ensures:**
âœ… Secure communication (HTTPS)
âœ… Scalable backend
âœ… Reliable database
âœ… Email notifications
âœ… JWT authentication
âœ… Error handling
âœ… User experience

